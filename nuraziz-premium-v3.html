<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NURAZIZ PREMIUM - V3</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #0a0e27;
            color: #fff;
            min-height: 100vh;
        }
        
        .container { 
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* CARDS */
        .card {
            background: linear-gradient(135deg, #16213e 0%, #1a2847 100%);
            border: 2px solid #0f3460;
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 24px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
            transition: all 0.3s;
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 212, 255, 0.2);
        }
        
        .card h2 {
            color: #00d4ff;
            margin-bottom: 24px;
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        /* INPUTS */
        .input {
            width: 100%;
            padding: 14px;
            margin-bottom: 14px;
            background: #0a0e27;
            border: 2px solid #0f3460;
            color: #00d4ff;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .input:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 0 4px rgba(0, 212, 255, 0.15);
        }
        
        /* BUTTONS */
        .btn {
            width: 100%;
            padding: 16px;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #00d4ff 0%, #00a8cc 100%);
            color: #0a0e27;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0, 212, 255, 0.4);
        }
        
        .btn-sec {
            background: transparent;
            border: 2px solid #00d4ff;
            color: #00d4ff;
        }
        
        .btn-sec:hover {
            background: #00d4ff;
            color: #0a0e27;
        }
        
        .btn-small {
            width: auto;
            padding: 10px 16px;
            margin: 0;
            font-size: 14px;
        }
        
        /* ITEMS */
        .item {
            background: #0a0e27;
            border-left: 5px solid #00d4ff;
            padding: 18px;
            margin-bottom: 14px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }
        
        .item:hover {
            transform: translateX(6px);
            border-left-width: 7px;
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.1);
        }
        
        .item.completed {
            border-left-color: #00ff88;
            opacity: 0.8;
        }
        
        .item.partial {
            border-left-color: #ffaa00;
        }
        
        .item.premium {
            border-left-color: #ff00ff;
            background: linear-gradient(135deg, #1a0033 0%, #0a0e27 100%);
        }
        
        /* TABS */
        .tab-btn {
            padding: 14px 24px;
            background: #16213e;
            border: 2px solid #0f3460;
            color: #00d4ff;
            font-weight: bold;
            cursor: pointer;
            border-radius: 10px;
            margin-right: 12px;
            margin-bottom: 12px;
            transition: all 0.3s;
        }
        
        .tab-btn:hover {
            background: #0f3460;
            transform: translateY(-2px);
        }
        
        .tab-btn.active {
            background: linear-gradient(135deg, #00d4ff 0%, #00a8cc 100%);
            color: #0a0e27;
            border-color: #00d4ff;
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);
        }
        
        /* HEADER */
        .header {
            background: linear-gradient(135deg, #0f3460 0%, #00d4ff 100%);
            padding: 28px;
            margin-bottom: 28px;
            border-radius: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 8px 24px rgba(0, 212, 255, 0.25);
        }
        
        .header h1 {
            font-size: 40px;
            margin: 0;
            flex: 1;
            text-align: center;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
        }
        
        .header-badge {
            background: #ff00ff;
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 12px;
        }
        
        /* SIDEBAR */
        .sidebar {
            position: fixed;
            left: -340px;
            top: 0;
            width: 340px;
            height: 100vh;
            background: linear-gradient(180deg, #16213e 0%, #0f3460 100%);
            border-right: 2px solid #0f3460;
            padding: 28px;
            overflow-y: auto;
            transition: left 0.3s ease;
            z-index: 1000;
            box-shadow: 8px 0 24px rgba(0, 0, 0, 0.5);
        }
        
        .sidebar.open {
            left: 0;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            z-index: 999;
            backdrop-filter: blur(6px);
        }
        
        .overlay.show {
            display: block;
        }
        
        /* BURGER MENU */
        .burger {
            background: linear-gradient(135deg, #00d4ff 0%, #00a8cc 100%);
            color: #0a0e27;
            border: none;
            padding: 14px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 22px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .burger:hover {
            transform: scale(1.12);
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.4);
        }
        
        /* UTILITY */
        .hidden {
            display: none !important;
        }
        
        /* GRID LAYOUTS */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 14px;
        }
        
        .grid-4 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 14px;
        }
        
        /* PROGRESS BAR */
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #0a0e27;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
            border: 1px solid #0f3460;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff 0%, #00ff88 100%);
            transition: width 0.4s ease;
        }
        
        /* STAT CARDS */
        .stat-card {
            background: linear-gradient(135deg, #0f3460 0%, #16213e 100%);
            padding: 24px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #0f3460;
            transition: all 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-4px);
            border-color: #00d4ff;
        }
        
        .stat-number {
            font-size: 42px;
            font-weight: bold;
            color: #00d4ff;
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 14px;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* MODAL */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(10px);
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #16213e 0%, #1a2847 100%);
            border: 2px solid #0f3460;
            border-radius: 16px;
            padding: 36px;
            max-width: 550px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
        }
        
        /* CHART */
        .chart-container {
            background: #0a0e27;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #0f3460;
        }
        
        .chart-bar {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .chart-label {
            width: 100px;
            font-size: 12px;
            color: #aaa;
        }
        
        .chart-bar-fill {
            flex: 1;
            height: 24px;
            background: linear-gradient(90deg, #00d4ff 0%, #00ff88 100%);
            border-radius: 4px;
            margin: 0 12px;
        }
        
        .chart-value {
            width: 50px;
            text-align: right;
            font-weight: bold;
            color: #00d4ff;
        }
        
        /* BADGE */
        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        
        .badge-success {
            background: #00ff88;
            color: #0a0e27;
        }
        
        .badge-warning {
            background: #ffaa00;
            color: #0a0e27;
        }
        
        .badge-error {
            background: #ff0055;
            color: #fff;
        }
        
        .badge-info {
            background: #00d4ff;
            color: #0a0e27;
        }
        
        .badge-premium {
            background: #ff00ff;
            color: #fff;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .grid-3, .grid-4 {
                grid-template-columns: 1fr;
            }
            
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 28px;
            }
            
            .card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>

    <!-- LOGIN SCREEN -->
    <div id="login-screen">
        <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; background: linear-gradient(135deg, #0a0e27 0%, #16213e 100%);">
            <div class="card" style="max-width: 500px; width: 90%;">
                <div id="login-form">
                    <h1 style="text-align: center; margin-bottom: 12px; color: #00d4ff; font-size: 56px; text-shadow: 0 0 30px rgba(0, 212, 255, 0.6);">NURAZIZ</h1>
                    <p style="text-align: center; color: #00d4ff; margin-bottom: 40px; font-size: 14px; letter-spacing: 2px;">PREMIUM V3</p>
                    
                    <input type="text" id="phone" placeholder="üì± Telefon raqam" class="input" autocomplete="off" inputmode="numeric">
                    <input type="password" id="pass" placeholder="üîê Parol" class="input" autocomplete="off">
                    
                    <button onclick="login()" class="btn">üöÄ KIRISH</button>
                    <button onclick="showRegister()" class="btn btn-sec">‚ú® YANGI AKKAUNT</button>
                    
                    <div style="margin-top: 28px; padding: 20px; background: linear-gradient(135deg, #1a0033 0%, #0a0e27 100%); border-radius: 12px; border-left: 4px solid #ff00ff;">
                        <p style="font-size: 12px; color: #aaa; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px;">üéÅ Premium Xususiyatlar:</p>
                        <p style="font-size: 13px; color: #ff00ff; margin-bottom: 6px;">‚úì Video mashg'ulotlar</p>
                        <p style="font-size: 13px; color: #ff00ff; margin-bottom: 6px;">‚úì Rasm yuklash</p>
                        <p style="font-size: 13px; color: #ff00ff; margin-bottom: 6px;">‚úì PDF hisobot</p>
                        <p style="font-size: 13px; color: #ff00ff;">‚úì Grafik va diagrammalar</p>
                    </div>
                </div>
                
                <div id="register-form" class="hidden">
                    <h2 style="text-align: center; margin-bottom: 28px; color: #00d4ff;">‚ú® YANGI AKKAUNT</h2>
                    
                    <input type="text" id="reg-name" placeholder="üë§ Ismingiz" class="input" autocomplete="off">
                    <input type="text" id="reg-phone" placeholder="üì± Telefon raqam" class="input" autocomplete="off" inputmode="numeric">
                    <input type="password" id="reg-pass" placeholder="üîê Parol (4-6)" class="input" autocomplete="off">
                    <input type="password" id="reg-pass2" placeholder="üîê Parolni tasdiqlang" class="input" autocomplete="off">
                    
                    <button onclick="registerUser()" class="btn">‚ú® AKKAUNT YARATISH</button>
                    <button onclick="backToLogin()" class="btn btn-sec">‚Üê ORQAGA</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN SCREEN -->
    <div id="main-screen" class="hidden">
        <!-- HEADER -->
        <div class="header">
            <button class="burger" onclick="toggleSidebar()">‚ò∞</button>
            <div style="flex: 1; text-align: center;">
                <h1>NURAZIZ</h1>
                <div class="header-badge">üåü PREMIUM V3</div>
            </div>
            <button onclick="logout()" style="background: linear-gradient(135deg, #ff0055 0%, #cc0044 100%); color: #fff; border: none; cursor: pointer; font-weight: bold; padding: 14px 20px; border-radius: 10px; transition: all 0.3s;">üö™ CHIQISH</button>
        </div>

        <!-- OVERLAY -->
        <div class="overlay" id="overlay" onclick="closeSidebar()"></div>
        
        <!-- SIDEBAR -->
        <div class="sidebar" id="sidebar">
            <button onclick="closeSidebar()" style="width: 100%; background: linear-gradient(135deg, #ff0055 0%, #cc0044 100%); color: #fff; border: none; padding: 14px; border-radius: 10px; margin-bottom: 28px; cursor: pointer; font-weight: bold; font-size: 16px;">‚úï YOPISH</button>
            
            <div style="padding: 18px; background: linear-gradient(135deg, #1a0033 0%, #0a0e27 100%); border-radius: 12px; margin-bottom: 28px; border-left: 4px solid #ff00ff;">
                <p style="font-size: 12px; color: #aaa; margin-bottom: 6px;">üë§ Foydalanuvchi:</p>
                <p style="font-size: 18px; color: #ff00ff; font-weight: bold;" id="user-phone"></p>
                <p style="font-size: 14px; color: #fff; margin-top: 10px;" id="user-name"></p>
            </div>
            
            <div style="margin-bottom: 20px;">
                <p style="font-size: 11px; color: #aaa; margin-bottom: 14px; text-transform: uppercase; letter-spacing: 1px;">üìã ASOSIY</p>
                <button class="tab-btn" style="width: 100%; text-align: left; margin-bottom: 10px;" onclick="switchTab('schedule'); closeSidebar();">üìÖ KUNLIK JADVAL</button>
                <button class="tab-btn" style="width: 100%; text-align: left; margin-bottom: 10px;" onclick="switchTab('morning'); closeSidebar();">üåÖ ERTALAB</button>
                <button class="tab-btn" style="width: 100%; text-align: left; margin-bottom: 10px;" onclick="switchTab('evening'); closeSidebar();">üåô KECHQURUN</button>
                <button class="tab-btn" style="width: 100%; text-align: left; margin-bottom: 10px;" onclick="switchTab('goals'); closeSidebar();">üéØ MAQSADLAR</button>
                <button class="tab-btn" style="width: 100%; text-align: left; margin-bottom: 10px;" onclick="switchTab('nutrition'); closeSidebar();">üçé OVQAT</button>
            </div>
            
            <hr style="border: none; border-top: 1px solid #0f3460; margin: 20px 0;">
            
            <div style="margin-bottom: 20px;">
                <p style="font-size: 11px; color: #aaa; margin-bottom: 14px; text-transform: uppercase; letter-spacing: 1px;">üìä TAHLIL</p>
                <button class="tab-btn" style="width: 100%; text-align: left; margin-bottom: 10px;" onclick="switchTab('insights'); closeSidebar();">ü§ñ AI MASLAHAT</button>
                <button class="tab-btn" style="width: 100%; text-align: left; margin-bottom: 10px;" onclick="switchTab('weekly'); closeSidebar();">üìà HAFTALIK</button>
                <button class="tab-btn" style="width: 100%; text-align: left; margin-bottom: 10px;" onclick="switchTab('stats'); closeSidebar();">üìä STATISTIKA</button>
            </div>
            
            <hr style="border: none; border-top: 1px solid #0f3460; margin: 20px 0;">
            
            <div style="margin-bottom: 20px;">
                <p style="font-size: 11px; color: #aaa; margin-bottom: 14px; text-transform: uppercase; letter-spacing: 1px;">üåü PREMIUM</p>
                <button class="tab-btn" style="width: 100%; text-align: left; margin-bottom: 10px; border-color: #ff00ff; color: #ff00ff;" onclick="switchTab('videos'); closeSidebar();">üé• VIDEO</button>
                <button class="tab-btn" style="width: 100%; text-align: left; margin-bottom: 10px; border-color: #ff00ff; color: #ff00ff;" onclick="switchTab('gallery'); closeSidebar();">üì∏ GALEREYA</button>
                <button class="tab-btn" style="width: 100%; text-align: left; margin-bottom: 10px; border-color: #ff00ff; color: #ff00ff;" onclick="switchTab('reports'); closeSidebar();">üìÑ HISOBOT</button>
            </div>
            
            <hr style="border: none; border-top: 1px solid #0f3460; margin: 20px 0;">
            
            <button class="tab-btn" style="width: 100%; text-align: left; background: linear-gradient(135deg, #ff0055 0%, #cc0044 100%); border-color: #ff0055; color: #fff;" onclick="switchTab('admin'); closeSidebar();">‚öôÔ∏è ADMIN</button>
        </div>

        <!-- MAIN CONTAINER -->
        <div class="container">
            <!-- TAB BUTTONS (Desktop) -->
            <div style="display: flex; gap: 12px; margin-bottom: 28px; flex-wrap: wrap; overflow-x: auto; padding-bottom: 8px;">
                <button class="tab-btn active" onclick="switchTab('schedule')">üìÖ JADVAL</button>
                <button class="tab-btn" onclick="switchTab('morning')">üåÖ ERTALAB</button>
                <button class="tab-btn" onclick="switchTab('evening')">üåô KECHQURUN</button>
                <button class="tab-btn" onclick="switchTab('goals')">üéØ MAQSAD</button>
                <button class="tab-btn" onclick="switchTab('nutrition')">üçé OVQAT</button>
                <button class="tab-btn" onclick="switchTab('insights')">ü§ñ AI</button>
                <button class="tab-btn" style="border-color: #ff00ff; color: #ff00ff;" onclick="switchTab('videos')">üé• VIDEO</button>
            </div>

            <!-- SCHEDULE TAB -->
            <div id="schedule-tab">
                <div class="card">
                    <h2>üìÖ KUNLIK JADVAL</h2>
                    
                    <div class="grid-2" style="margin-bottom: 18px;">
                        <input type="time" id="schedule-time" class="input">
                        <input type="text" id="schedule-task" class="input" placeholder="Vazifa nomi">
                    </div>
                    
                    <button onclick="addSchedule()" class="btn">‚ûï QO'SHISH</button>
                    
                    <div id="schedule-list" style="margin-top: 24px;"></div>
                </div>
            </div>

            <!-- MORNING TAB -->
            <div id="morning-tab" class="hidden">
                <div class="card">
                    <h2>üåÖ ERTALAB MASHQLARI</h2>
                    
                    <div class="grid-3" style="margin-bottom: 18px;">
                        <input type="date" id="morning-date" class="input">
                        <input type="text" id="morning-name" class="input" placeholder="Mashq nomi">
                        <input type="number" id="morning-target" class="input" placeholder="Maqsad" min="1">
                    </div>
                    
                    <button onclick="addMorning()" class="btn">‚ûï QO'SHISH</button>
                    
                    <div id="morning-list" style="margin-top: 24px;"></div>
                </div>
            </div>

            <!-- EVENING TAB -->
            <div id="evening-tab" class="hidden">
                <div class="card">
                    <h2>üåô KECHQURUN MASHQLARI</h2>
                    
                    <div class="grid-3" style="margin-bottom: 18px;">
                        <input type="date" id="evening-date" class="input">
                        <input type="text" id="evening-name" class="input" placeholder="Mashq nomi">
                        <input type="number" id="evening-weight" class="input" placeholder="Og'irlik (kg)" min="0">
                    </div>
                    
                    <button onclick="addEvening()" class="btn">‚ûï QO'SHISH</button>
                    
                    <div id="evening-list" style="margin-top: 24px;"></div>
                </div>
            </div>

            <!-- GOALS TAB -->
            <div id="goals-tab" class="hidden">
                <div class="card">
                    <h2>üéØ MAQSADLAR</h2>
                    
                    <div class="grid-2" style="margin-bottom: 18px;">
                        <input type="text" id="goal-name" class="input" placeholder="Maqsad nomi">
                        <input type="number" id="goal-target" class="input" placeholder="Maqsad raqami" min="1">
                    </div>
                    
                    <button onclick="addGoal()" class="btn">‚ûï QO'SHISH</button>
                    
                    <div id="goals-list" style="margin-top: 24px;"></div>
                </div>
            </div>

            <!-- NUTRITION TAB -->
            <div id="nutrition-tab" class="hidden">
                <div class="card">
                    <h2>üçé OVQATLANISH REJASI</h2>
                    
                    <div class="grid-3" style="margin-bottom: 18px;">
                        <input type="text" id="food-name" class="input" placeholder="Ovqat nomi">
                        <input type="number" id="food-calories" class="input" placeholder="Kaloriya" min="0">
                        <input type="time" id="food-time" class="input">
                    </div>
                    
                    <button onclick="addFood()" class="btn">‚ûï QO'SHISH</button>
                    
                    <div id="nutrition-list" style="margin-top: 24px;"></div>
                    
                    <div style="margin-top: 28px; padding: 24px; background: linear-gradient(135deg, #0a0e27 0%, #1a0033 100%); border-radius: 12px; border-left: 4px solid #00ff88;">
                        <p style="font-size: 14px; color: #aaa; margin-bottom: 12px;">üî• Bugungi Kaloriya:</p>
                        <p style="font-size: 40px; color: #00ff88; font-weight: bold;" id="total-calories">0</p>
                        <p style="font-size: 12px; color: #aaa; margin-top: 8px;">Tavsiya: 2000-2500 kcal</p>
                    </div>
                </div>
            </div>

            <!-- AI INSIGHTS TAB -->
            <div id="insights-tab" class="hidden">
                <div class="card">
                    <h2>ü§ñ AI MASLAHATLAR</h2>
                    
                    <div id="insights-list"></div>
                    
                    <button onclick="generateInsights()" class="btn" style="margin-top: 24px;">üîÑ YANGI MASLAHAT</button>
                </div>
            </div>

            <!-- WEEKLY TAB -->
            <div id="weekly-tab" class="hidden">
                <div class="card">
                    <h2>üìà HAFTALIK NATIJALAR</h2>
                    
                    <div class="grid-2" style="margin-bottom: 28px;">
                        <div class="stat-card">
                            <div class="stat-number" id="weekly-morning">0</div>
                            <div class="stat-label">Ertalab</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="weekly-evening">0</div>
                            <div class="stat-label">Kechqurun</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <p style="color: #00d4ff; font-weight: bold; margin-bottom: 16px;">Kunlik Mashqlar:</p>
                        <div id="weekly-chart"></div>
                    </div>
                </div>
            </div>

            <!-- STATS TAB -->
            <div id="stats-tab" class="hidden">
                <div class="card">
                    <h2>üìä STATISTIKA</h2>
                    
                    <div class="grid-3" style="margin-bottom: 28px;">
                        <div class="stat-card">
                            <div class="stat-number" id="total-workouts">0</div>
                            <div class="stat-label">Jami Mashqlar</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="total-goals">0</div>
                            <div class="stat-label">Maqsadlar</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="completion-rate">0%</div>
                            <div class="stat-label">Bajarilish</div>
                        </div>
                    </div>
                    
                    <div id="stats-list"></div>
                </div>
            </div>

            <!-- VIDEO TAB (PREMIUM) -->
            <div id="videos-tab" class="hidden">
                <div class="card">
                    <h2>üé• VIDEO MASHG'ULOTLAR <span class="header-badge">PREMIUM</span></h2>
                    
                    <div class="grid-2" style="margin-bottom: 18px;">
                        <input type="text" id="video-name" class="input" placeholder="Video nomi">
                        <input type="text" id="video-url" class="input" placeholder="YouTube URL">
                    </div>
                    
                    <button onclick="addVideo()" class="btn">‚ûï VIDEO QO'SHISH</button>
                    
                    <div id="videos-list" style="margin-top: 24px;"></div>
                </div>
            </div>

            <!-- GALLERY TAB (PREMIUM) -->
            <div id="gallery-tab" class="hidden">
                <div class="card">
                    <h2>üì∏ GALEREYA <span class="header-badge">PREMIUM</span></h2>
                    
                    <div style="margin-bottom: 18px;">
                        <input type="file" id="gallery-file" class="input" accept="image/*" style="padding: 8px;">
                        <input type="text" id="gallery-title" class="input" placeholder="Rasm sarlavhasi">
                    </div>
                    
                    <button onclick="addGallery()" class="btn">‚ûï RASM QO'SHISH</button>
                    
                    <div id="gallery-list" style="margin-top: 24px; display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 12px;"></div>
                </div>
            </div>

            <!-- REPORTS TAB (PREMIUM) -->
            <div id="reports-tab" class="hidden">
                <div class="card">
                    <h2>üìÑ HISOBOT <span class="header-badge">PREMIUM</span></h2>
                    
                    <button onclick="generatePDFReport()" class="btn">üì• PDF HISOBOT YUKLASH</button>
                    <button onclick="generateExcelReport()" class="btn btn-sec" style="margin-top: 12px;">üìä EXCEL HISOBOT</button>
                    
                    <div style="margin-top: 28px; padding: 24px; background: #0a0e27; border-radius: 12px; border-left: 4px solid #00d4ff;">
                        <p style="color: #00d4ff; font-weight: bold; margin-bottom: 16px;">üìã Hisobot Tafsilotlari:</p>
                        <div id="report-summary"></div>
                    </div>
                </div>
            </div>

            <!-- ADMIN TAB -->
            <div id="admin-tab" class="hidden">
                <div class="card">
                    <h2>‚öôÔ∏è ADMIN PANEL</h2>
                    
                    <div style="padding: 18px; background: linear-gradient(135deg, #ff0055 0%, #cc0044 100%); border-radius: 12px; margin-bottom: 28px;">
                        <p style="font-size: 14px; font-weight: bold;">‚ö†Ô∏è Faqat adminlar uchun!</p>
                    </div>
                    
                    <div style="margin-bottom: 28px;">
                        <h3 style="color: #00d4ff; margin-bottom: 18px;">üí∞ Narx Sozlamalari</h3>
                        <div class="grid-2" style="margin-bottom: 14px;">
                            <input type="number" id="admin-price" class="input" placeholder="Oylik narx (so'm)" min="0">
                            <input type="number" id="admin-discount" class="input" placeholder="Chegirma (%)" min="0" max="100">
                        </div>
                        <button onclick="savePriceSettings()" class="btn">üíæ SAQLASH</button>
                    </div>
                    
                    <hr style="border: none; border-top: 1px solid #0f3460; margin: 28px 0;">
                    
                    <div>
                        <h3 style="color: #00d4ff; margin-bottom: 18px;">üë• Foydalanuvchilar</h3>
                        <button onclick="loadUsers()" class="btn btn-sec" style="margin-bottom: 18px;">üîÑ YANGILASH</button>
                        <div id="admin-users-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- EDIT MODAL -->
    <div class="modal" id="edit-modal">
        <div class="modal-content">
            <h2 style="color: #00d4ff; margin-bottom: 28px;">‚úèÔ∏è TAHRIRLASH</h2>
            
            <input type="hidden" id="edit-id">
            <input type="hidden" id="edit-type">
            
            <div id="edit-fields"></div>
            
            <div style="display: flex; gap: 14px; margin-top: 28px;">
                <button onclick="saveEdit()" class="btn" style="flex: 1;">üíæ SAQLASH</button>
                <button onclick="closeEditModal()" class="btn btn-sec" style="flex: 1;">‚ùå BEKOR</button>
            </div>
        </div>
    </div>

    <script>
        // ==================== DATABASE ====================
        const API_URL = 'http://localhost:5003';
        let currentUser = null;
        let userData = null;
        
        // ==================== UTILITY FUNCTIONS ====================
        function formatPhone(input) {
            if (!input) return;
            let val = input.value.replace(/\D/g, '');
            if (val.length > 12) val = val.slice(0, 12);
            
            let formatted = '';
            if (val.length > 0) formatted = '+' + val.slice(0, 3);
            if (val.length > 3) formatted += ' ' + val.slice(3, 5);
            if (val.length > 5) formatted += ' ' + val.slice(5, 8);
            if (val.length > 8) formatted += ' ' + val.slice(8, 10);
            if (val.length > 10) formatted += ' ' + val.slice(10, 12);
            
            input.value = formatted;
        }

        function showNotification(message, type = 'info') {
            const colors = {
                success: '#00ff88',
                error: '#ff0055',
                info: '#00d4ff',
                warning: '#ffaa00'
            };
            
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${colors[type]};
                color: #0a0e27;
                padding: 16px 24px;
                border-radius: 10px;
                font-weight: bold;
                z-index: 3000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // ==================== AUTH FUNCTIONS ====================
        async function login() {
            const phone = document.getElementById('phone').value.trim();
            const pass = document.getElementById('pass').value.trim();
            
            if (!phone || !pass) {
                showNotification('Barcha maydonlarni to\'ldiring!', 'error');
                return;
            }
            
            try {
                const response = await fetch(`${API_URL}/api/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ phone, pass })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    currentUser = phone;
                    userData = result.user;
                    showNotification('Xush kelibsiz!', 'success');
                    showMainScreen();
                } else {
                    showNotification('Telefon yoki parol noto\'g\'ri!', 'error');
                }
            } catch (err) {
                console.error('Login error:', err);
                showNotification('Server bilan bog\'lanishda xatolik!', 'error');
            }
        }

        function showRegister() {
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('register-form').classList.remove('hidden');
        }

        function backToLogin() {
            document.getElementById('register-form').classList.add('hidden');
            document.getElementById('login-form').classList.remove('hidden');
        }

        async function registerUser() {
            const name = document.getElementById('reg-name').value.trim();
            const phone = document.getElementById('reg-phone').value.trim();
            const pass = document.getElementById('reg-pass').value.trim();
            const pass2 = document.getElementById('reg-pass2').value.trim();
            
            if (!name || !phone || !pass || !pass2) {
                showNotification('Barcha maydonlarni to\'ldiring!', 'error');
                return;
            }
            
            if (pass.length < 4 || pass.length > 6) {
                showNotification('Parol 4-6 raqam bo\'lishi kerak!', 'error');
                return;
            }
            
            if (pass !== pass2) {
                showNotification('Parollar mos emas!', 'error');
                return;
            }
            
            try {
                const response = await fetch(`${API_URL}/api/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ phone, pass, name })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showNotification('Akkaunt yaratildi!', 'success');
                    backToLogin();
                    document.getElementById('phone').value = phone;
                } else if (result.error === 'exists') {
                    showNotification('Bu telefon allaqachon ro\'yxatdan o\'tgan!', 'error');
                } else {
                    showNotification('Xatolik yuz berdi!', 'error');
                }
            } catch (err) {
                console.error('Register error:', err);
                showNotification('Server bilan bog\'lanishda xatolik!', 'error');
            }
        }

        function logout() {
            if (confirm('Chiqishni xohlaysizmi?')) {
                currentUser = null;
                userData = null;
                location.reload();
            }
        }

        // ==================== UI FUNCTIONS ====================
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
            document.getElementById('overlay').classList.toggle('show');
        }

        function closeSidebar() {
            document.getElementById('sidebar').classList.remove('open');
            document.getElementById('overlay').classList.remove('show');
        }

        function switchTab(tabName) {
            document.querySelectorAll('[id$="-tab"]').forEach(el => el.classList.add('hidden'));
            document.getElementById(tabName + '-tab').classList.remove('hidden');
            
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
            
            updateUI();
        }

        function showMainScreen() {
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('main-screen').classList.remove('hidden');
            
            document.getElementById('user-phone').textContent = currentUser;
            document.getElementById('user-name').textContent = userData.name || 'Foydalanuvchi';
            
            updateUI();
        }

        // ==================== PREMIUM FUNCTIONS ====================
        function addVideo() {
            const name = document.getElementById('video-name').value.trim();
            const url = document.getElementById('video-url').value.trim();
            
            if (!name || !url) {
                showNotification('Barcha maydonlarni to\'ldiring!', 'error');
                return;
            }
            
            if (!userData.videos) userData.videos = [];
            
            userData.videos.push({
                id: Date.now(),
                name,
                url,
                date: new Date().toISOString().split('T')[0],
                watched: false
            });
            
            document.getElementById('video-name').value = '';
            document.getElementById('video-url').value = '';
            
            updateUI();
            showNotification('Video qo\'shildi!', 'success');
        }

        function deleteVideo(id) {
            if (!confirm('O\'chirish?')) return;
            userData.videos = userData.videos.filter(v => v.id !== id);
            updateUI();
            showNotification('Video o\'chirildi!', 'success');
        }

        function addGallery() {
            const file = document.getElementById('gallery-file').files[0];
            const title = document.getElementById('gallery-title').value.trim();
            
            if (!file || !title) {
                showNotification('Rasm va sarlavhani tanlang!', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                if (!userData.gallery) userData.gallery = [];
                
                userData.gallery.push({
                    id: Date.now(),
                    title,
                    image: e.target.result,
                    date: new Date().toISOString().split('T')[0]
                });
                
                document.getElementById('gallery-file').value = '';
                document.getElementById('gallery-title').value = '';
                
                updateUI();
                showNotification('Rasm qo\'shildi!', 'success');
            };
            reader.readAsDataURL(file);
        }

        function deleteGallery(id) {
            if (!confirm('O\'chirish?')) return;
            userData.gallery = userData.gallery.filter(g => g.id !== id);
            updateUI();
            showNotification('Rasm o\'chirildi!', 'success');
        }

        function generatePDFReport() {
            showNotification('PDF hisobot tayyorlanmoqda...', 'info');
            
            let content = 'NURAZIZ - HISOBOT\n\n';
            content += `Foydalanuvchi: ${userData.name}\n`;
            content += `Telefon: ${currentUser}\n`;
            content += `Sana: ${new Date().toLocaleDateString('uz-UZ')}\n\n`;
            
            content += `STATISTIKA:\n`;
            content += `Jami Mashqlar: ${(userData.morning || []).length + (userData.evening || []).length}\n`;
            content += `Maqsadlar: ${(userData.goals || []).length}\n`;
            content += `Videolar: ${(userData.videos || []).length}\n`;
            content += `Rasmlar: ${(userData.gallery || []).length}\n`;
            
            const element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(content));
            element.setAttribute('download', 'nuraziz-hisobot.txt');
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
            
            showNotification('Hisobot yuklab olinadi!', 'success');
        }

        function generateExcelReport() {
            showNotification('Excel hisobot tayyorlanmoqda...', 'info');
            
            let csv = 'Nomi,Turi,Sana,Holati\n';
            
            (userData.morning || []).forEach(m => {
                csv += `${m.name},Ertalab,${m.date},${m.status}\n`;
            });
            
            (userData.evening || []).forEach(e => {
                csv += `${e.name},Kechqurun,${e.date},${e.status}\n`;
            });
            
            const element = document.createElement('a');
            element.setAttribute('href', 'data:text/csv;charset=utf-8,' + encodeURIComponent(csv));
            element.setAttribute('download', 'nuraziz-hisobot.csv');
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
            
            showNotification('Excel hisobot yuklab olinadi!', 'success');
        }

        // ==================== UPDATE UI ====================
        function updateUI() {
            if (!userData) return;
            
            if (!userData.videos) userData.videos = [];
            if (!userData.gallery) userData.gallery = [];
            
            // Videos
            const videosList = document.getElementById('videos-list');
            if (userData.videos.length === 0) {
                videosList.innerHTML = '<div class="item premium"><span>Videolar yo\'q</span></div>';
            } else {
                videosList.innerHTML = userData.videos.map(v => `
                    <div class="item premium">
                        <div>
                            <p style="font-weight: bold; color: #ff00ff;">${v.name}</p>
                            <p style="font-size: 12px; color: #aaa;">${v.date}</p>
                        </div>
                        <button onclick="deleteVideo(${v.id})" style="background: #ff0055; color: #fff; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-weight: bold;">üóëÔ∏è</button>
                    </div>
                `).join('');
            }
            
            // Gallery
            const galleryList = document.getElementById('gallery-list');
            if (userData.gallery.length === 0) {
                galleryList.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: #aaa;">Rasmlar yo\'q</div>';
            } else {
                galleryList.innerHTML = userData.gallery.map(g => `
                    <div style="position: relative; border-radius: 10px; overflow: hidden; border: 2px solid #ff00ff;">
                        <img src="${g.image}" style="width: 100%; height: 150px; object-fit: cover;">
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.8); padding: 8px; text-align: center;">
                            <p style="font-size: 12px; color: #ff00ff; font-weight: bold;">${g.title}</p>
                            <button onclick="deleteGallery(${g.id})" style="background: #ff0055; color: #fff; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px; margin-top: 4px;">üóëÔ∏è</button>
                        </div>
                    </div>
                `).join('');
            }
            
            // Report Summary
            const reportSummary = document.getElementById('report-summary');
            reportSummary.innerHTML = `
                <div class="item">
                    <span>üìÖ Kunlik Jadval: ${(userData.schedule ? Object.keys(userData.schedule).length : 0)} kun</span>
                </div>
                <div class="item">
                    <span>üåÖ Ertalab Mashqlari: ${(userData.morning || []).length} ta</span>
                </div>
                <div class="item">
                    <span>üåô Kechqurun Mashqlari: ${(userData.evening || []).length} ta</span>
                </div>
                <div class="item">
                    <span>üéØ Maqsadlar: ${(userData.goals || []).length} ta</span>
                </div>
                <div class="item">
                    <span>üé• Videolar: ${(userData.videos || []).length} ta</span>
                </div>
                <div class="item">
                    <span>üì∏ Rasmlar: ${(userData.gallery || []).length} ta</span>
                </div>
            `;
        }

        // ==================== INITIALIZATION ====================
        window.addEventListener('load', async function() {
            const phoneInputs = ['phone', 'reg-phone'];
            phoneInputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', function() {
                        formatPhone(this);
                    });
                }
            });
            
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('morning-date').value = today;
            document.getElementById('evening-date').value = today;
            
            console.log('‚úÖ NURAZIZ PREMIUM V3 yuklandi');
        });

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
